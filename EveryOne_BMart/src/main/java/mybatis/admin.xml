<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="admin">

	<select id="getMember" resultType="member">
		select * from member where id=#{id}
	</select>

	

	<update id="updateMember">
		update member
		set 
			password=#{password}, name=#{name}, phone1=#{phone1},
			phone2=#{phone2}, phone3=#{phone3}, email1=#{email1}, email2=#{email2}
		where id=#{id}
	</update>


	<select id="getDocumentList" resultType="doc.model.DocBean">
		select * from document
		order by dnum desc
		fetch first 5 rows only
	</select>
	
	<select id="getWaitDocumentCountForAdmin" resultType="int">
		select count(*) from document where request=1 and dstatus=0
	</select>
	
	<select id="getWaitEnterCountForAdmin" resultType="int">
		select count(*) from enter where request=1 and dstatus=0
	</select>
	
	<select id="getAllMemberCount" resultType="int">
		select count(*) from member
	</select>
	
	<select id="getAllProductCount" resultType="int">
		select count(*) from product where id='admin'
	</select>
	
	 <select id="getDesCount" resultType="int">
	    select count(*) as cnt from description
	</select>
	
	<select id="getMonthSaleCount" resultType="int">
		SELECT
		    SUM(o.pamount * p.price) AS totalPrice,
		    TO_CHAR(o.orderdate, 'YYYY') AS orderYear
		FROM
		    orderInfo o
		INNER JOIN
		    product p ON o.pnum = p.pnum
		WHERE
		    TO_CHAR(o.orderdate, 'YYYY') = TO_CHAR(sysdate,'YYYY') 
		GROUP BY
		    TO_CHAR(o.orderdate, 'YYYY')
	</select>
	
	

</mapper>